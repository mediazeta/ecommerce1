jQuery(function (t) { var a = !1, e = !1; function i(i) { var r; i.preventDefault(); var o = "on"; t(i.target).hasClass("dmach-loadmore") ? r = t(i.target) : (r = t(".filtered-posts-cont"), o = "off"); var d = r.parent().find(".divi-filter-archive-loop"), n = d.attr("data-layoutid"), l = d.attr("data-posttype"), s = d.attr("data-noresults"), c = d.attr("data-sortorder"), p = d.attr("data-sortasc"), u = d.attr("data-gridstyle"), f = d.attr("data-columnscount"), m = d.attr("data-postnumber"), _ = d.attr("data-btntext"), v = d.attr("data-btntext_loading"), h = d.attr("data-resultcount"), g = d.attr("data-countposition"), y = parseInt(d.attr("data-current-page")), j = (parseInt(d.attr("data-max-page")), d.attr("data-filter-var")), w = d.find(".divi-loadmore").attr("data-icon"), x = d.attr("data-has-map"), b = d.attr("data-map-selector"), Q = d.attr("data-map-marker-layout"), k = d.attr("map_all_posts"), I = d.attr("data-map-cluster"), C = d.attr("data-link_wholegrid"), z = d.attr("data-wholegrid-external"), A = d.attr("data-wholegrid-external_acf"), G = { action: "divi_filter_loadmore_ajax_handler", security: loadmore_ajax_object.security, query: j, page: y, layoutid: n, posttype: l, noresults: s, sortorder: c, sortasc: p, gridstyle: u, columnscount: f, resultcount: h, countposition: g, postnumber: m, loadmoretext: _, loadmore_icon: w, link_wholegrid: C, link_wholegrid_external: z, link_wholegrid_external_acf: A, is_loadmore: o, has_map: x, map_all_posts: k, map_selector: b, marker_layout: Q }; "none" == n && (G.show_rating = d.attr("data-show_rating"), G.show_price = d.attr("data-show_price"), G.show_excerpt = d.attr("data-show_excerpt"), G.show_add_to_cart = d.attr("data-show_add_to_cart")), t.ajax({ url: loadmore_ajax_object.ajax_url, data: G, type: "POST", beforeSend: function (t) { if ("on" == o) r.text(v); else { var a = jQuery(".filtered-posts-cont").attr("data-ajaxload-anim"); r.parent().append('<div class="loadmore-ajax-loading ' + a + '"><div class="lines"><div class="line"></div><div class="line"></div><div class="line"></div></div><div class="spinner donut-cont"><div class="donut"></div></div><div class="spinner donutmulti-cont"><div class="donut multi"></div></div><div class="spinner ripple-cont"><div class="ripple"></div></div></div>') } d.closest(".filtered-posts-cont").find(".filtered-posts-loading").prepend('<div class="ajax-loading"><div class="lines"><div class="line"></div><div class="line"></div><div class="line"></div></div><div class="spinner donut-cont"><div class="donut"></div></div><div class="spinner donutmulti-cont"><div class="donut multi"></div></div><div class="spinner ripple-cont"><div class="ripple"></div></div></div>') }, success: function (i) { if (a = !1, i) { var o = t(i.posts); r.hasClass("dmach-loadmore") ? r.text(_.replace(/\\/g, "")) : (r.parent().find(".loading").remove(), r.parent().find(".loadmore-ajax-loading").remove()), r.parent().find(".loop-grid").length > 0 ? r.parent().find(".loop-grid").eq(0).append(o) : r.parent().find("ul.products").length > 0 && r.parent().find("ul.products").eq(0).append(o), r.parent().find(".divi-filter-archive-loop").append(i.css_output), d.closest(".filtered-posts-cont").find(".filtered-posts-loading").find(".ajax-loading").remove(); var n = r.parent(); if (n.find(".divi-filter-result-count").length > 0 && n.find(".divi-filter-result-count").remove(), i.bc_result_count && r.parent().find(".woocommerce-result-count").length > 0 && r.parent().find(".woocommerce-result-count").html(i.bc_result_count), r.hasClass("dmach-loadmore") && r.remove(), i.after_post) { var l = t("<textarea />").html(i.after_post).text(); n.append(l.replace(/\\/g, "")) } if (jQuery(".single_add_to_cart_button").addClass("ajax_add_to_cart"), "undefined" != typeof ajax_disabled_products_class && t("." + ajax_disabled_products_class + " .single_add_to_cart_button").removeClass("ajax_add_to_cart"), d.attr("data-current-page", y + 1), "function" == typeof resizeAllGridItems) { var s = o.find("img").length; o.find("img").one("load", function () { 0 == --s && resizeAllGridItems() }).each(function () { this.complete && jQuery(this).trigger("load") }) } if ("function" == typeof get_post_popup && get_post_popup(), d.find(".grid-col").find(".gallery_vars").length > 0) { var c = d.find(".grid-col").find(".gallery_vars").attr("data-gallery_vars"), p = d.find(".grid-col").find(".gallery_vars").attr("data-gallery_type"); if (c = "{" + (c = (c = (c = c.replace(/,\s*$/, "")).replace(/,/g, ", ")).replace(/'/g, '"')) + "}", c = JSON.parse(c), jQuery(".et_pb_de_mach_acf_slider_containter").each(function (t, a) { jQuery(this).hasClass("slick-initialized") && jQuery(this).slick("unslick"), jQuery(this).slick(c) }), "gallery" == p) { var f = d.find(".grid-col").find(".gallery_vars").attr("data-gallery_nav"); f = "{" + (f = (f = (f = f.replace(/,\s*$/, "")).replace(/,/g, ", ")).replace(/'/g, '"')) + "}", (f = JSON.parse(f)).asNavFor = ".et_pb_de_mach_acf_slider_containter", f.focusOnSelect = !0, jQuery(".et_pb_de_mach_acf_slider_containter_nav").each(function (t, a) { jQuery(this).hasClass("slick-initialized") && jQuery(this).slick("unslick"), jQuery(this).slick(f) }) } } if (i.map_data && jQuery(b).length > 0 && "off" == k && jQuery(b).each(function () { if ("on" != I) { var t = jQuery(this); t.find(".et_pb_map_pin").remove(), jQuery.each(i.map_data, function (a, e) { t.append('<div class="et_pb_map_pin" data-lat="' + e.lat + '" data-lng="' + e.lng + '" data-title="' + e.title + '"><div class="infowindow">' + e.infoview + "</div></div>") }), et_pb_map_init(t) } else { var a = jQuery(this), e = [], r = [], o = []; if (jQuery.each(i.map_data, function (t, a) { e.push({ lat: a.lat, lng: a.lng }), r.push(a.title.charAt(0)), o.push(a.infoview) }), void 0 !== a.data("map")) { var d = a.data("map"); const t = e.map((t, a) => { var e = new google.maps.Marker({ position: t, label: r[a] }), i = new google.maps.InfoWindow({ content: o[a] }); return google.maps.event.addListener(d, "click", function () { i.close() }), google.maps.event.addListener(e, "click", function () { i.open(d, e) }), e }); new MarkerClusterer(d, t, { imagePath: clusterer_obj.imgPath }) } } }), "masonry" == u && "function" == typeof resizeAllGridItems) { var m = d.attr("data-masonry_ajax_buffer"); resizeAllGridItems(); s = jQuery(".divi-filter-archive-loop.main-loop").children().eq(0).find("img").length; jQuery(".divi-filter-archive-loop.main-loop").children().eq(0).find("img").one("load", function () { 0 == --s && resizeAllGridItems() }).each(function () { this.complete && jQuery(this).trigger("load") }), setTimeout(function () { resizeAllGridItems() }, m) } jQuery.fn.fitVids && jQuery("#main-content").fitVids({ customSelector: "iframe[src^='http://www.hulu.com'], iframe[src^='http://www.dailymotion.com'], iframe[src^='http://www.funnyordie.com'], iframe[src^='https://embed-ssl.ted.com'], iframe[src^='http://embed.revision3.com'], iframe[src^='https://flickr.com'], iframe[src^='http://blip.tv'], iframe[src^='http://www.collegehumor.com']" }), jQuery.event.trigger({ type: "divi_filter_completed" }), "" == i.posts && (e = !0) } else r.hasClass("dmach-loadmore") && r.remove() } }) } t(document).on("click", ".dmach-loadmore", function (t) { i(t) }), "infinite" == t(".divi-filter-archive-loop.main-loop").data("loadmore") && t(window).scroll(function (r) { var o = t(".divi-filter-archive-loop.main-loop"), d = o.offset(); parseInt(o.attr("data-current-page")) < parseInt(o.attr("data-max-page")) && t(window).scrollTop() > d.top + o.outerHeight(!0) - t(window).height() && !a && !e && (a = !0, i(r)) }) });